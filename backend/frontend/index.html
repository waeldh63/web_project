<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

        <body>
            <div class="ui-widget">
                <label for="recipe">Recipe:</label><br>
                <input id="recipe">
            </div>

            <script>
                $(document).ready(function() {
                    $("#recipe").autocomplete({
                        source: async function(request, response) {
                            let data = await fetch(`http://localhost:3000/search?term=${request.term}`)
                                .then(results => results.json())
                                .then(results => results.map(result => {
                                    return { label: result.name, value: result.name, id: result._id };
                                }));
                                response(data);
                        },
                        minLength: 2,
                        select: function(event, ui) {
                            console.log(ui.item);
                        }
                    });
                });
            </script>

        </body>

    </head>
</html>